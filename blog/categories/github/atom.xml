<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Github | My Octopress Blog]]></title>
  <link href="http://ddewaele.github.io/blog/categories/github/atom.xml" rel="self"/>
  <link href="http://ddewaele.github.io/"/>
  <updated>2014-05-10T14:25:54+02:00</updated>
  <id>http://ddewaele.github.io/</id>
  <author>
    <name><![CDATA[Your Name]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Setting Up My Octopress Blog on Github Pages]]></title>
    <link href="http://ddewaele.github.io/blog/2014/05/10/setting-up-my-octopress-blog-on-github-pages/"/>
    <updated>2014-05-10T13:28:14+02:00</updated>
    <id>http://ddewaele.github.io/blog/2014/05/10/setting-up-my-octopress-blog-on-github-pages</id>
    <content type="html"><![CDATA[<h1>Follow instructions</h1>

<ul>
<li>git clone git://github.com/imathis/octopress.git octopress</li>
<li>cd octopress/</li>
<li>gem install bundler</li>
<li>rbenv rehash</li>
<li>bundle install</li>
<li>rake install</li>
</ul>


<h1>Previewing</h1>

<ul>
<li>rake preview</li>
</ul>


<h1>Deploying</h1>

<p>I&rsquo;m going to be using Github pages to deploy my blog so I followed the instructions and executed the <code>rake setup_github_pages</code> command.</p>

<pre><code>rake setup_github_pages
Enter the read/write url for your repository
(For example, 'git@github.com:your_username/your_username.github.io.git)
           or 'https://github.com/your_username/your_username.github.io')
Repository url: git@github.com:ddewaele/ddewaele.github.com.git
rm -rf _deploy
mkdir _deploy
cd _deploy
Initialized empty Git repository in /Users/ddewaele/octopress/octopress/_deploy/.git/
[master (root-commit) 3c52f91] Octopress init
 1 files changed, 1 insertions(+), 0 deletions(-)
 create mode 100644 index.html
cd -

---
## Now you can deploy to git@github.com:ddewaele/ddewaele.github.com.git with `rake deploy` ##
</code></pre>

<p>Note that I&rsquo;m still using a <code>github.com</code> suffix for my pages. Github has recently switched to <code>gitub.io</code></p>

<p>I had also  already setup a &ldquo;default&rdquo; user page using github pages that contained some static html that was generated by th Github pages wizard.</p>

<p>So when I ran <code>rake deploy</code> it seems to run fine at first but i got the following error:</p>

<pre><code>rake deploy
## Deploying branch to Github Pages 
## Pulling any updates from Github Pages 
cd _deploy
warning: no common commits
remote: Reusing existing pack: 17, done.
remote: Total 17 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (17/17), done.
From github.com:ddewaele/ddewaele.github.com
 * [new branch]      master     -&gt; origin/master
You asked me to pull without telling me which branch you
want to merge with, and 'branch.master.merge' in
your configuration file does not tell me, either. Please
specify which branch you want to use on the command line and
try again (e.g. 'git pull &lt;repository&gt; &lt;refspec&gt;').
See git-pull(1) for details.

If you often merge with the same branch, you may want to
use something like the following in your configuration file:

    [branch "master"]
    remote = &lt;nickname&gt;
    merge = &lt;remote-ref&gt;

    [remote "&lt;nickname&gt;"]
    url = &lt;url&gt;
    fetch = &lt;refspec&gt;

See git-config(1) for details.
cd -
rm -rf _deploy/index.html

## Copying public to _deploy
cp -r public/. _deploy
cd _deploy

## Committing: Site updated at 2014-05-10 09:54:27 UTC
[master de754e5] Site updated at 2014-05-10 09:54:27 UTC
 61 files changed, 1118 insertions(+), 1 deletions(-)
 create mode 100644 assets/jwplayer/glow/controlbar/background.png
 ...
 create mode 100644 images/search.png
 rewrite index.html (100%)
 create mode 100644 javascripts/github.js
 ...
 create mode 100644 stylesheets/screen.css

## Pushing generated _deploy website
To git@github.com:ddewaele/ddewaele.github.com.git
 ! [rejected]        master -&gt; master (non-fast-forward)
error: failed to push some refs to 'git@github.com:ddewaele/ddewaele.github.com.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details.

## Github Pages deploy complete
cd -
</code></pre>

<p>The reason for this erro is because there was a conflict between waht was already on my github pages repository and what was generated by octopress</p>

<p>In order to solve this you need to ensure that your <code>_deploy</code> folder is in a state so that changes can be pushed.</p>

<p>What octopress was trying to do was this:</p>

<pre><code>cd _deploy/
git push

To git@github.com:ddewaele/ddewaele.github.com.git
 ! [rejected]        master -&gt; master (non-fast-forward)
error: failed to push some refs to 'git@github.com:ddewaele/ddewaele.github.com.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details.
</code></pre>

<p>The reason why this push was failing is because we had <code>non-fast-forward</code> updates.</p>

<p>This becomes clear when you try to pull in the changes from the remote repository</p>

<pre><code>cd _deploy/
git pull origin master

warning: no common commits
remote: Reusing existing pack: 17, done.
remote: Total 17 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (17/17), done.
From github.com:ddewaele/ddewaele.github.com
 * branch            master     -&gt; FETCH_HEAD
Auto-merging index.html
CONFLICT (add/add): Merge conflict in index.html
Automatic merge failed; fix conflicts and then commit the result.
</code></pre>

<p>As you can see, a <code>conflict</code> was introduced on <code>index.html</code>. This is why octopress wasn`t capable of deploying the site.</p>

<p>So we need to resolve these conflicts.</p>

<h2>Your blog source</h2>

<p>You&rsquo;ll notice when doing a <code>git status</code> that octopress has created a git repository in your <code>`octopress</code> folder that is currently checked out on the source branch</p>

<p>git status</p>

<pre><code># On branch source
# Changes not staged for commit:
#   (use "git add &lt;file&gt;..." to update what will be committed)
#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)
#
#   modified:   Rakefile
#   modified:   _config.yml
#
# Untracked files:
#   (use "git add &lt;file&gt;..." to include in what will be committed)
#
#   sass/
#   source/
no changes added to commit (use "git add" and/or "git commit -a")
</code></pre>

<p>It has setup a gitignore file to ensure that your deploy folder doesn&rsquo;t get deployed to github pages.</p>

<pre><code>cat .gitignore 

.bundle
.DS_Store
.sass-cache
.gist-cache
.pygments-cache
_deploy
public
sass.old
source.old
source/_stash
source/stylesheets/screen.css
vendor
node_modules
</code></pre>

<p>And it has the following git config.</p>

<pre><code>cat .git/config 
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
    ignorecase = true
[remote "octopress"]
    url = git://github.com/imathis/octopress.git
    fetch = +refs/heads/*:refs/remotes/octopress/*
[branch "source"]
    remote = origin
    merge = refs/heads/master
[remote "origin"]
    url = git@github.com:ddewaele/ddewaele.github.com.git
    fetch = +refs/heads/*:refs/remotes/origin/*
</code></pre>

<p>In order to commit the source code to your blog</p>

<pre><code>git add .
git commit -m 'your message'
git push origin source
</code></pre>

<h1>Errors occured</h1>

<pre><code>---
## Now you can deploy to git@github.com:ddewaele/ddewaele.github.com.git with `rake deploy` ##
Davys-MacBook-Air:octopress ddewaele$ rake deploy
## Deploying branch to Github Pages 
## Pulling any updates from Github Pages 
cd _deploy
warning: no common commits
remote: Reusing existing pack: 17, done.
remote: Total 17 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (17/17), done.
From github.com:ddewaele/ddewaele.github.com
 * [new branch]      master     -&gt; origin/master
You asked me to pull without telling me which branch you
want to merge with, and 'branch.master.merge' in
your configuration file does not tell me, either. Please
specify which branch you want to use on the command line and
try again (e.g. 'git pull &lt;repository&gt; &lt;refspec&gt;').
See git-pull(1) for details.

If you often merge with the same branch, you may want to
use something like the following in your configuration file:

    [branch "master"]
    remote = &lt;nickname&gt;
    merge = &lt;remote-ref&gt;

    [remote "&lt;nickname&gt;"]
    url = &lt;url&gt;
    fetch = &lt;refspec&gt;

See git-config(1) for details.
cd -
rm -rf _deploy/index.html

## Copying public to _deploy
cp -r public/. _deploy
cd _deploy

## Committing: Site updated at 2014-05-10 09:38:40 UTC
[master 4eb09be] Site updated at 2014-05-10 09:38:40 UTC
 1 files changed, 0 insertions(+), 1 deletions(-)
 delete mode 100644 index.html

## Pushing generated _deploy website
To git@github.com:ddewaele/ddewaele.github.com.git
 ! [rejected]        master -&gt; master (non-fast-forward)
error: failed to push some refs to 'git@github.com:ddewaele/ddewaele.github.com.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details.
</code></pre>

<h1>References</h1>

<ul>
<li><a href="http://octopress.org/docs/setup/">http://octopress.org/docs/setup/</a></li>
</ul>

]]></content>
  </entry>
  
</feed>
